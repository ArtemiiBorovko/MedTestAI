// Ключевые слова для категорий
const categoryKeywords = {
  bacteriology: [
    "бактери",
    "стафилококк",
    "стрептококк",
    "сальмонелл",
    "шигелл",
    "иерсини",
    "псевдомонад",
    "клебсиелл",
    "протей",
    "кишечная палочка",
    "микобактери",
    "бордетелл",
    "бруцелл",
    "легионелл",
    "холерный вибрион",
    "кампилобактер",
    "листери",
    "клостриди",
    "бацилл",
    "коринебактери",
    "актиномицет",
    "нокарди",
    "трепонем",
    "лептоспир",
    "боррели",
    "риккетси",
    "хламиди",
    "микоплазм",
    "уреаплазм",
  ],
  virology: [
    "вирус",
    "аденовирус",
    "герпес",
    "грипп",
    "гепатит",
    "ВИЧ",
    "корь",
    "краснух",
    "паротит",
    "полиомиелит",
    "ротавирус",
    "энтеровирус",
    "риновирус",
    "коронавирус",
    "папилломавирус",
    "арбовирус",
    "рабдовирус",
    "пикорнавирус",
    "парамиксовирус",
    "ортомиксовирус",
    "ретровирус",
    "гепадновирус",
    "поксвирус",
    "парвовирус",
    "калицивирус",
    "флавивирус",
    "буньявирус",
    "аренавирус",
    "филовирус",
    "реовирус",
  ],
  mycology: [
    "гриб",
    "кандид",
    "аспергилл",
    "пеницилл",
    "криптококк",
    "гистоплазм",
    "бластомицес",
    "мукор",
    "ризопус",
    "микроспорум",
    "трихофитон",
    "эпидермофитон",
    "малассези",
    "фузариум",
    "дрожж",
    "плесень",
  ],
  parasitology: [
    "паразит",
    "простейш",
    "гельминт",
    "амеб",
    "лямбли",
    "трихомонад",
    "токсоплазм",
    "плазмоди",
    "лейшмани",
    "трипаносом",
    "балантиди",
    "аскарид",
    "остриц",
    "цепень",
    "эхинококк",
    "описторх",
    "шистосом",
    "филяри",
    "анкилостом",
    "стронгилоид",
    "токсокар",
    "трихинелл",
    "лентец",
    "сосальщик",
  ],
};

export const categorizeQuestion = (questionText) => {
  const text = questionText.toLowerCase();
  let scores = {
    bacteriology: 0,
    virology: 0,
    mycology: 0,
    parasitology: 0,
  };

  // Подсчет ключевых слов для каждой категории
  for (const [category, keywords] of Object.entries(categoryKeywords)) {
    keywords.forEach((keyword) => {
      if (text.includes(keyword)) {
        scores[category]++;
      }
    });
  }

  // Находим категорию с максимальным счетом
  let maxScore = 0;
  let detectedCategory = "other";

  for (const [category, score] of Object.entries(scores)) {
    if (score > maxScore) {
      maxScore = score;
      detectedCategory = category;
    }
  }

  // Если максимальный счет 0, оставляем 'other'
  return maxScore > 0 ? detectedCategory : "other";
};

// Функция для получения вопросов по категории
export const getQuestionsByCategory = (questions, category) => {
  return questions.filter((q) => q.category === category);
};
